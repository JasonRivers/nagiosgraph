nagiosgraph Installation
------------------------

File:    $Id: INSTALL,v 1.1.1.1 2004/08/03 08:08:28 sauber Exp $
Author:  (c) Soren Dossing, 2004
License: OSI Artistic License
         http://www.opensource.org/licenses/artistic-license.php

Follow instructions below to install and use nagiosgraph.

 - Install nagiosgraph.conf, map, insert.pl and show.cgi somewhere, fx
   /usr/local/nagios/nagiosgraph/

 - Edit paths and debug level in nagiosgraph.conf.

 - Check that nagios user can write to rrd dir, and www user can read.

 - Check that nagios and www user can write to log file.

 - In insert.pl and show.cgi edit path to nagiosgraph.conf file.

 - In nagios.cfg set:

     process_performance_data=1
     service_perfdata_command=process-service-perfdata

 - In checkcommands.cfg or misccommands.cfg:

     define command {
       command_name  process-service-perfdata
       command_line  /usr/local/nagios/nagiosgraph/insert.pl "$LASTCHECK$\t$HOSTNAME$\t$SERVICEDESC$\t$OUTPUT$\t$PERFDATA$"
     }
 - Put an icon approx. 40x40 in .../share/images/logos/ for nagios to link
   to graphs.

 - Edit serviceextinfo.cfg

   Most services can be graphed with no particular configuration like this:

     define serviceextinfo {
       service_description  dns
       host_name       server01,server02
       notes_url       /nagiosgraph/show.cgi?host=$HOSTNAME$&service=$SERVICEDESC$
       icon_image      graph.gif
       icon_image_alt  View graphs
     }

   On the host_name line write all hosts where this type of data are being
   collected.

   Some type of services have data values that have big differences in the
   magnitude. In such cases it's good idea to split up into seperate
   graphs. Here's an example for ntp:

     define serviceextinfo {
       service_description  ntp
       host_name       server01,server02,server03,server04
       notes_url       /nagiosgraph/show.cgi?host=$HOSTNAME$&service=$SERVICEDESC$&db=ntp,jitter~s,offset~s&db=ntp,stratum
       icon_image      graph.gif
       icon_image_alt  View graphs
     }

 - Configure Apache to point to show.cgi. For example:

     ScriptAlias /nagiosgraph/ /usr/local/nagios/nagiosgraph/

 - Consider security

 - Keep an eye on the log file. It can grow big. Perhaps rotate it, or
   decrease log level when everything works fine.
